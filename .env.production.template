# Production Environment Configuration Template
# Copy this file to .env and fill in your actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NODE_ENV=production
PORT=3001
APP_URL=https://writecarenotes.com
APP_NAME=WriteCareNotes
INSTANCE_ID=app-1  # Change to app-2, app-3 for other instances

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_HOST=postgres-primary
DB_PORT=5432
DB_USERNAME=writecarenotes
DB_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD_MIN_32_CHARS
DB_NAME=writecarenotes_production
DB_SSL=false  # Set to true if using SSL

# Database Pool Settings
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=30000

# Replication Configuration
REPLICATION_PASSWORD=CHANGE_THIS_TO_SECURE_REPLICATION_PASSWORD
DB_REPLICA_1_HOST=postgres-replica-1
DB_REPLICA_2_HOST=postgres-replica-2

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_TO_SECURE_REDIS_PASSWORD
REDIS_DB=0
REDIS_TLS=false

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
JWT_SECRET=CHANGE_THIS_TO_RANDOM_STRING_MIN_32_CHARS_abc123xyz789
JWT_REFRESH_SECRET=CHANGE_THIS_TO_RANDOM_STRING_MIN_32_CHARS_xyz789abc123
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Session Secret
SESSION_SECRET=CHANGE_THIS_TO_RANDOM_STRING_MIN_32_CHARS_session123

# Encryption Key (for sensitive data)
ENCRYPTION_KEY=CHANGE_THIS_TO_32_BYTE_HEX_STRING

# =============================================================================
# EMAIL CONFIGURATION (SMTP)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false  # true for 465, false for other ports
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password
SMTP_FROM=noreply@writecarenotes.com
SMTP_FROM_NAME=WriteCareNotes

# =============================================================================
# AWS CONFIGURATION (if using AWS services)
# =============================================================================
AWS_REGION=eu-west-2
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=writecarenotes-documents
AWS_S3_REGION=eu-west-2

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
UPLOAD_MAX_FILE_SIZE=10485760  # 10MB in bytes
UPLOAD_MAX_FILES=10
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword
UPLOAD_STORAGE_PATH=/app/uploads

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
LOG_LEVEL=info  # error, warn, info, debug
LOG_FORMAT=json  # json or simple
LOG_TO_FILE=true
LOG_FILE_PATH=/app/logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14  # Keep logs for 14 days

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# PROMETHEUS METRICS
# =============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=100  # 100 requests per minute
RATE_LIMIT_SKIP_SUCCESSFUL=false

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGIN=https://writecarenotes.com,https://app.writecarenotes.com
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE
CORS_CREDENTIALS=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_AI_ENABLED=true
FEATURE_CHAT_ENABLED=true
FEATURE_NOTIFICATIONS_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_CHILDREN_CARE_ENABLED=true

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Twilio (SMS)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+447123456789

# Stripe (Payments)
STRIPE_PUBLIC_KEY=pk_live_your-stripe-public-key
STRIPE_SECRET_KEY=sk_live_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# OpenAI (AI Features)
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_TTL=3600  # 1 hour in seconds
CACHE_CHECK_PERIOD=600  # 10 minutes
CACHE_MAX_KEYS=10000

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=3002
WEBSOCKET_PATH=/socket.io
WEBSOCKET_CORS_ORIGIN=https://writecarenotes.com

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=writecarenotes-backups

# =============================================================================
# MONITORING CREDENTIALS
# =============================================================================
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_TO_SECURE_GRAFANA_PASSWORD
PROMETHEUS_RETENTION_TIME=15d
ALERTMANAGER_SMTP_FROM=alerts@writecarenotes.com

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000  # 30 seconds
HEALTH_CHECK_TIMEOUT=5000  # 5 seconds

# =============================================================================
# GRACEFUL SHUTDOWN
# =============================================================================
SHUTDOWN_TIMEOUT=30000  # 30 seconds
SHUTDOWN_SIGNALS=SIGTERM,SIGINT,SIGUSR2

# =============================================================================
# COMPLIANCE & REGULATORY
# =============================================================================
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years (UK care home requirement)
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years

# Ofsted Integration
OFSTED_API_ENABLED=false
OFSTED_API_KEY=your-ofsted-api-key
OFSTED_PROVIDER_ID=your-provider-id

# Local Authority Integration
LA_INTEGRATION_ENABLED=false
LA_API_ENDPOINT=https://api.localauthority.gov.uk
LA_API_KEY=your-la-api-key

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=128
NODE_MAX_SEMI_SPACE_SIZE=1

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# =============================================================================
# TIMEZONE
# =============================================================================
TZ=Europe/London

# =============================================================================
# CUSTOM ORGANIZATION SETTINGS
# =============================================================================
DEFAULT_TIMEZONE=Europe/London
DEFAULT_CURRENCY=GBP
DEFAULT_LANGUAGE=en-GB
DEFAULT_DATE_FORMAT=DD/MM/YYYY
